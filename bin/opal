#!/usr/bin/env ruby

require 'optparse'
require 'opal'

options = {}
parser = OptionParser.new do |opts|
  opts.banner = "Usage: opal [options] file.rb"

  opts.on("-v", "--version", "Opal Version") do |v|
    puts Opal::VERSION
    exit
  end
end

parser.parse!

if ARGV.empty?
  puts parser.banner
else
  src = ARGV.first
  src = File.read src if File.exist? src
  puts Opal.parse(src)
end
